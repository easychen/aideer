# 浏览器扩展使用指南

aiDeer 浏览器扩展是一个强大的媒体文件收集工具，可以帮助您从网页批量收集图片和视频，并直接导入到 aiDeer 系统中。

## 📦 安装扩展

### Chrome/Edge 安装

1. 下载扩展文件包
2. 打开浏览器扩展管理页面：
   - Chrome: `chrome://extensions/`
   - Edge: `edge://extensions/`
3. 开启 **"开发者模式"**
4. 点击 **"加载已解压的扩展程序"**
5. 选择扩展文件夹完成安装

### Firefox 安装

1. 下载 `.xpi` 扩展文件
2. 打开 Firefox
3. 将 `.xpi` 文件拖拽到浏览器窗口
4. 点击 **"添加"** 确认安装

## ⚙️ 初始配置

### 1. 设置后端连接

首次使用需要配置 aiDeer 后端连接：

1. 点击浏览器工具栏中的 aiDeer 图标
2. 在弹出的设置面板中配置：
   - **后端 API 地址**: `http://localhost:3001` (默认)
   - **保存路径**: 选择文件保存的项目路径
3. 点击 **"测试连接"** 验证配置
4. 配置成功后点击 **"保存设置"**

![扩展设置](../assets/extension-settings.png)

### 2. 权限确认

扩展需要以下权限：
- **activeTab**: 访问当前标签页内容
- **contextMenus**: 添加右键菜单
- **storage**: 保存用户设置
- **host_permissions**: 访问所有网站（用于媒体收集）

## 🎯 使用方法

### 方式一：批量收集（推荐）

这是最常用的功能，可以一次性收集页面上的所有媒体文件：

1. **激活收集器**：
   - 按快捷键 `Ctrl+Shift+M` (Windows/Linux) 或 `Cmd+Shift+M` (macOS)
   - 或点击扩展图标选择 **"收集页面媒体文件"**

2. **媒体扫描**：
   - 扩展会自动扫描页面上的所有图片和视频
   - 显示收集器界面，列出所有找到的媒体文件

3. **智能过滤**：
   - 使用尺寸滑块过滤小图片（默认过滤 100px 以下）
   - 自动排除广告图片、图标等无关内容
   - 显示文件尺寸和格式信息

4. **选择文件**：
   - 默认全选所有符合条件的文件
   - 可以单独取消选择不需要的文件
   - 支持预览功能，点击图片可放大查看

5. **导入文件**：
   - 点击 **"导入选中文件"** 开始下载
   - 显示导入进度和状态
   - 完成后显示成功导入的文件数量

![批量收集界面](../assets/batch-collection.png)

### 方式二：单个文件收集

对于单个图片或视频，可以使用右键菜单：

1. 在图片或视频上右键点击
2. 选择 **"保存到 aiDeer"**
3. 文件会直接导入到配置的项目中

## 🔧 高级功能

### 智能媒体扫描

扩展使用智能算法扫描页面媒体：

- **图片检测**: 扫描 `<img>` 标签、CSS 背景图片、SVG 图像
- **视频检测**: 识别 `<video>` 标签和视频链接
- **动态内容**: 支持 JavaScript 动态加载的媒体内容
- **去重处理**: 自动去除重复的媒体文件

### 文件过滤选项

#### 尺寸过滤
- 使用滑块设置最小宽度阈值
- 自动过滤小于阈值的图片
- 实时更新符合条件的文件数量

#### 格式支持
支持的图片格式：
- JPG/JPEG
- PNG
- GIF
- WebP
- SVG
- BMP

支持的视频格式：
- MP4
- WebM
- AVI
- MOV

### 批量操作

- **全选/取消全选**: 快速选择所有文件
- **按类型选择**: 只选择图片或只选择视频
- **预览模式**: 点击文件可预览内容
- **状态显示**: 实时显示选中文件数量和总大小

## 🎨 界面说明

### 收集器界面元素

1. **顶部工具栏**:
   - 文件计数器
   - 尺寸过滤滑块
   - 关闭按钮

2. **文件网格**:
   - 缩略图预览
   - 文件信息（尺寸、格式）
   - 选择复选框

3. **底部操作栏**:
   - 全选/取消全选按钮
   - 导入按钮
   - 进度指示器

### 设置面板

- **连接配置**: 后端 API 地址设置
- **路径配置**: 默认保存路径
- **连接测试**: 验证后端连接状态
- **版本信息**: 显示扩展版本

## 🚀 使用技巧

### 1. 快捷键使用
- `Ctrl+Shift+M`: 快速激活媒体收集器
- `Escape`: 关闭收集器界面
- `Space`: 预览选中的文件

### 2. 最佳实践
- **合理设置过滤**: 根据需要调整尺寸过滤阈值
- **预览确认**: 导入前预览文件确保质量
- **分批处理**: 对于大量文件，建议分批导入
- **网络考虑**: 在网络较慢时适当减少同时导入的文件数量

### 3. 常见使用场景
- **设计素材收集**: 从设计网站收集高质量图片
- **产品图片整理**: 批量收集电商网站的产品图片
- **社交媒体备份**: 保存社交平台的图片和视频
- **研究资料收集**: 收集学术或研究相关的媒体资料

## ⚠️ 注意事项

### 版权和法律
- 请确保您有权下载和使用收集的媒体文件
- 遵守网站的使用条款和版权政策
- 仅用于个人学习和研究目的

### 技术限制
- 某些网站可能有反爬虫机制
- 动态加载的内容可能需要等待页面完全加载
- 大文件下载可能需要较长时间

### 性能考虑
- 大量文件同时导入可能影响浏览器性能
- 建议在网络状况良好时使用
- 避免在低配置设备上处理过多文件

## 🔧 故障排除

### 常见问题

**扩展无法连接后端**:
- 检查 aiDeer 后端是否正常运行
- 确认 API 地址配置正确
- 检查防火墙设置

**无法扫描到媒体文件**:
- 等待页面完全加载后再尝试
- 刷新页面重新扫描
- 检查页面是否有媒体内容

**导入失败**:
- 检查网络连接
- 确认目标路径有写入权限
- 查看浏览器控制台错误信息

### 调试模式

开启调试模式查看详细信息：
1. 打开浏览器开发者工具 (F12)
2. 切换到 Console 标签
3. 查看扩展相关的日志信息

## 📞 获取帮助

如果遇到问题：
1. 查看 [常见问题](../faq.md)
2. 访问 [GitHub Issues](https://github.com/easychen/aideer/issues)
3. 参与 [社区讨论](https://github.com/easychen/aideer/discussions)

---

通过 aiDeer 浏览器扩展，您可以轻松地从网页收集所需的媒体文件，大大提高工作效率！